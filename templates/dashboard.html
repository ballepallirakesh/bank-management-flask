<!DOCTYPE html>
<html>
<head>
    <title>Dashboard</title>
</head>
<body>

<h2>Welcome, {{ name }} ðŸ‘‹</h2>
<!-- ðŸ”” Flash Messages Block -->
{% with messages = get_flashed_messages(with_categories=true) %}
  {% if messages %}
    <ul style="list-style: none; padding: 0;">
      {% for category, message in messages %}
        <li style="color: {% if category == 'success' %}green{% else %}red{% endif %};">
          {{ message }}
        </li>
      {% endfor %}
    </ul>
  {% endif %}
{% endwith %}

<h3>ðŸ’° Current Balance: â‚¹{{ balance }}</h3>

<!-- Deposit form -->
<form action="{{ url_for('deposit') }}" method="post">
  <input type="number" name="amount" min="1" step="0.01" required>
  <button type="submit">Deposit</button>
</form>

<!-- Withdraw form -->
<form action="{{ url_for('withdraw') }}" method="post">
  <input type="number" name="amount" min="1" step="0.01" required>
  <button type="submit">Withdraw</button>
</form>

<!-- View transaction history -->
<a href="{{ url_for('transaction_history') }}">View Transactions</a><br><br>

<!-- Logout -->
<form action="{{ url_for('logout') }}" method="post">
  <button type="submit">ðŸšª Logout</button>
</form>

<!-- Show last 5 transactions -->
<h3>ðŸ§¾ Recent Transactions</h3>
{% if transactions %}
  <ul>
    {% for tx in transactions %}
      <li>ðŸ”¹ {{ tx[0].capitalize() }} â‚¹{{ tx[1] }} on {{ tx[2] }}</li>
    {% endfor %}
  </ul>
{% else %}
  <p>ðŸ“­ No recent transactions</p>
{% endif %}

</body>
</html>
